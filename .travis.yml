language: python
python:
  - "2.6"
  - "2.7"
before_install:
 - sudo apt-get update
 - sudo apt-get install python-opencv
 - sudo dpkg -L python-opencv
 - sudo apt-get install libboost-all-dev
 - sudo dpkg -L libboost-all-dev
 #http://stackoverflow.com/questions/7496547/python-scipy-needs-blas
 - sudo apt-get install gfortran libopenblas-dev liblapack-dev
# command to install dependencies
install:
 - pip install -r requirements > /dev/null 2> /dev/null
 - echo "Installing PyMaxflow..."
 - git clone https://github.com/pmneila/PyMaxflow
 - cd PyMaxflow
 - python setup.py build
 # http://stackoverflow.com/questions/11108461/python-importerror-cython-distutils
 - export BASE_PYTHON_PATH=`which python`
 - sudo $BASE_PYTHON_PATH setup.py install
 - cd ..
 - rm -rf PyMaxflow
 - python setup.py build_ext
 - find ./build/* -name '*.so' -exec cp {} src \;
 - echo "Checking active modules:"
 - pydoc modules
 - echo "Installation complete!"
# command to run tests
script:
 - nosetests
